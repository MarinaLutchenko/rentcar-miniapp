<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RentCarNT</title>

<style>
*{box-sizing:border-box;}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  background:#0e0e0e;
  color:#ffffff;
}

.container{
  padding:20px;
  max-width:520px;
  margin:auto;
}

h1{
  font-size:22px;
  margin-bottom:20px;
  color:#ffffff;
}

.subtitle{
  color:#b5b5b5;
  font-size:14px;
  margin-bottom:15px;
}

.card{
  background:#1c1c1c;
  padding:16px;
  border-radius:16px;
  margin-bottom:14px;
  cursor:pointer;
  transition:.15s;
  border:1px solid transparent;
  color:#ffffff;
}

.card:hover{
  border:1px solid #2ecc71;
}

.card:active{
  transform:scale(0.98);
}

.btn{
  width:100%;
  padding:16px;
  background:#2ecc71;
  border:none;
  border-radius:14px;
  font-size:16px;
  font-weight:600;
  margin-top:15px;
  cursor:pointer;
  color:#ffffff;
}

.btn.secondary{
  background:#1c1c1c;
  border:1px solid #2ecc71;
  color:#ffffff;
}

input{
  width:100%;
  padding:14px;
  margin-bottom:12px;
  border-radius:12px;
  border:none;
  background:#1c1c1c;
  color:#ffffff;
  font-size:15px;
}

input::placeholder{
  color:#777;
}

.success{
  background:#1c1c1c;
  padding:25px;
  border-radius:18px;
  text-align:center;
  color:#ffffff;
}

.hidden{display:none;}
</style>
</head>

<body>
<div class="container">

<!-- –ì–û–†–û–î–ê -->
<div id="screen-city">
<h1>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –∞—Ä–µ–Ω–¥—ã</h1>

<div class="card" onclick="selectCity('–ù—è—á–∞–Ω–≥')">üèù –ù—è—á–∞–Ω–≥</div>
<div class="card" onclick="selectCity('–ú—É–π–Ω–µ')">üå¥ –ú—É–π–Ω–µ</div>
<div class="card" onclick="selectCity('–§—É–∫—É–æ–∫')">üåä –§—É–∫—É–æ–∫</div>
<div class="card" onclick="selectCity('–î–∞–Ω–∞–Ω–≥')">üåÖ –î–∞–Ω–∞–Ω–≥</div>
<div class="card" onclick="selectCity('–•–æ—à–∏–º–∏–Ω')">üèô –•–æ—à–∏–º–∏–Ω</div>
<div class="card" onclick="selectCity('–•–∞–Ω–æ–π')">üèõ –•–∞–Ω–æ–π</div>
</div>

<!-- –î–ê–¢–´ -->
<div id="screen-dates" class="hidden">
<h1>–£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—ã –∞—Ä–µ–Ω–¥—ã</h1>
<div class="subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—ã –ø–æ–µ–∑–¥–∫–∏</div>

<input type="date" id="dateFrom">
<input type="date" id="dateTo">

<button class="btn" onclick="goToContacts()">–î–∞–ª–µ–µ</button>
<button class="btn secondary" onclick="backToCity()">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<!-- –ö–û–ù–¢–ê–ö–¢–´ -->
<div id="screen-contacts" class="hidden">
<h1>–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h1>
<div class="subtitle">–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏</div>

<input type="text" id="clientName" placeholder="–í–∞—à–µ –∏–º—è">
<input type="text" id="clientContact" placeholder="Telegram –∏–ª–∏ WhatsApp">

<button class="btn" onclick="sendBooking()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
<button class="btn secondary" onclick="backToDates()">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<!-- –£–°–ü–ï–• -->
<div id="screen-success" class="hidden">
<div class="success">
<h2>‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞</h2>
<p>–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.</p>

<button class="btn" onclick="window.open('https://t.me/RentCarNT')">
‚úâÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—É
</button>

<button class="btn secondary" onclick="resetApp()">
–û—Å—Ç–∞–≤–∏—Ç—å –µ—â—ë –∑–∞—è–≤–∫—É
</button>
</div>
</div>

</div>

<script>

const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbw83bucvRMn2_TNmmLoDhnVSL5Eeh3nA01-ANetMaGh7sqET43VMiTcxVKt24mx_aU/exec";

let bookingData = {};

function show(id){
  document.querySelectorAll('[id^="screen"]').forEach(el=>el.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

function selectCity(city){
  bookingData.city = city;
  show("screen-dates");
}

function backToCity(){
  show("screen-city");
}

function goToContacts(){
  bookingData.dateFrom = document.getElementById("dateFrom").value;
  bookingData.dateTo = document.getElementById("dateTo").value;
  show("screen-contacts");
}

function backToDates(){
  show("screen-dates");
}

function sendBooking(){

  bookingData.name = document.getElementById("clientName").value;
  bookingData.contact = document.getElementById("clientContact").value;

  fetch(SCRIPT_URL,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify(bookingData)
  })
  .then(r=>r.json())
  .then(res=>{
    if(res.status==="ok"){
      show("screen-success");
    }else{
      alert("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏.");
    }
  })
  .catch(()=>{
    alert("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏.");
  });
}

function resetApp(){
  bookingData = {};
  show("screen-city");
}

</script>
</body>
</html>
