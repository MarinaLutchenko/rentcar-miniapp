<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RentCarNT</title>

<style>
body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
    background:#0e0e0e;
    color:#fff;
}

.container{
    padding:20px;
    max-width:500px;
    margin:auto;
}

h1{
    font-size:22px;
    margin-bottom:25px;
}

.card{
    background:#1c1c1c;
    padding:16px;
    border-radius:16px;
    margin-bottom:14px;
    cursor:pointer;
    transition:.2s;
    border:1px solid transparent;
}

.card:hover{
    border:1px solid #2ecc71;
}

.btn{
    width:100%;
    padding:16px;
    background:#2ecc71;
    border:none;
    border-radius:14px;
    font-size:16px;
    font-weight:600;
    margin-top:20px;
    cursor:pointer;
}

.btn:hover{
    opacity:.9;
}

input{
    width:100%;
    padding:14px;
    margin-bottom:12px;
    border-radius:12px;
    border:none;
    background:#1c1c1c;
    color:#fff;
    font-size:15px;
}

.hidden{ display:none; }

.subtitle{
    color:#888;
    font-size:14px;
    margin-bottom:15px;
}

.success{
    background:#1c1c1c;
    padding:20px;
    border-radius:16px;
    text-align:center;
}
</style>
</head>
<body>

<div class="container">

<!-- –≠–ö–†–ê–ù 1 –ì–û–†–û–î–ê -->
<div id="screen-city">
<h1>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –∞—Ä–µ–Ω–¥—ã</h1>

<div class="card" onclick="selectCity('–ù—è—á–∞–Ω–≥')">üèù –ù—è—á–∞–Ω–≥</div>
<div class="card" onclick="selectCity('–ú—É–π–Ω–µ')">üå¥ –ú—É–π–Ω–µ</div>
<div class="card" onclick="selectCity('–§—É–∫—É–æ–∫')">üåä –§—É–∫—É–æ–∫</div>
<div class="card" onclick="selectCity('–î–∞–Ω–∞–Ω–≥')">üåÖ –î–∞–Ω–∞–Ω–≥</div>
<div class="card" onclick="selectCity('–•–æ—à–∏–º–∏–Ω')">üèô –•–æ—à–∏–º–∏–Ω</div>
<div class="card" onclick="selectCity('–•–∞–Ω–æ–π')">üèõ –•–∞–Ω–æ–π</div>

</div>


<!-- –≠–ö–†–ê–ù 2 –°–ï–ì–ú–ï–ù–¢–´ -->
<div id="screen-segment" class="hidden">
<h1>–ö–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç –∞–≤—Ç–æ –≤–∞–º –ø–æ–¥–æ–π–¥—ë—Ç?</h1>

<div class="card" onclick="selectSegment('–ë–∞–ª–∞–Ω—Å –∫–æ–º—Ñ–æ—Ä—Ç–∞ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç–∏')">
üöó –ë–∞–ª–∞–Ω—Å –∫–æ–º—Ñ–æ—Ä—Ç–∞ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç–∏
</div>

<div class="card" onclick="selectSegment('–ö–æ–º—Ñ–æ—Ä—Ç –¥–ª—è —Ç—Ä–∞—Å—Å—ã –∏ –≥–æ—Ä–Ω—ã—Ö –¥–æ—Ä–æ–≥')">
üöô –ö–æ–º—Ñ–æ—Ä—Ç –¥–ª—è —Ç—Ä–∞—Å—Å—ã –∏ –≥–æ—Ä–Ω—ã—Ö –¥–æ—Ä–æ–≥
</div>

<div class="card" onclick="selectSegment('–ü—Ä–æ—Å—Ç–æ—Ä –¥–ª—è —Å–µ–º—å–∏ –∏ –∫–æ–º–ø–∞–Ω–∏–∏')">
üë®‚Äçüë©‚Äçüëß –ü—Ä–æ—Å—Ç–æ—Ä –¥–ª—è —Å–µ–º—å–∏ –∏ –∫–æ–º–ø–∞–Ω–∏–∏
</div>

<div class="card" onclick="selectSegment('–≠–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è')">
‚ö° –≠–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è
</div>

<div class="card" onclick="selectSegment('–ë–∏–∑–Ω–µ—Å –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–ª–∞—Å—Å')">
üíé –ë–∏–∑–Ω–µ—Å –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–ª–∞—Å—Å
</div>

</div>


<!-- –≠–ö–†–ê–ù 3 –ú–ê–®–ò–ù–´ -->
<div id="screen-car" class="hidden">
<h1>–í—ã–±–µ—Ä–∏—Ç–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—å</h1>

<div id="car-list"></div>

</div>


<!-- –≠–ö–†–ê–ù 4 –î–ê–¢–´ -->
<div id="screen-dates" class="hidden">
<h1>–£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—ã –∞—Ä–µ–Ω–¥—ã</h1>
<div class="subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—ã –ø–æ–µ–∑–¥–∫–∏</div>

<input type="date" id="dateFrom">
<input type="date" id="dateTo">

<button class="btn" onclick="goToContacts()">–î–∞–ª–µ–µ</button>

</div>


<!-- –≠–ö–†–ê–ù 5 –ö–û–ù–¢–ê–ö–¢–´ -->
<div id="screen-contacts" class="hidden">
<h1>–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h1>
<div class="subtitle">–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏</div>

<input type="text" id="clientName" placeholder="–í–∞—à–µ –∏–º—è">
<input type="text" id="clientContact" placeholder="Telegram –∏–ª–∏ WhatsApp">

<button class="btn" onclick="sendBooking()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>

</div>


<!-- –≠–ö–†–ê–ù 6 –£–°–ü–ï–• -->
<div id="screen-success" class="hidden">
<div class="success">
<h2>‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞</h2>
<p>–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.</p>
<p style="margin-top:15px;color:#888;">
–ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å —Å—Ä–æ—á–Ω—ã–π ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –Ω–∞–ø—Ä—è–º—É—é –≤ Telegram.
</p>
</div>
</div>

</div>


<script>

const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx2r66kSGzkG3lLbUy13emRGAMjRmsCZ7EcA2RMc-dxjVRgHq8nvxn0UpmNzAjfRDLT/exec";

let bookingData = {};

const cars = {
"–ë–∞–ª–∞–Ω—Å –∫–æ–º—Ñ–æ—Ä—Ç–∞ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç–∏": [
{ name:"Hyundai Kona", price:40 },
{ name:"Mazda 2", price:35 }
],
"–ö–æ–º—Ñ–æ—Ä—Ç –¥–ª—è —Ç—Ä–∞—Å—Å—ã –∏ –≥–æ—Ä–Ω—ã—Ö –¥–æ—Ä–æ–≥": [
{ name:"Mazda CX-5", price:52 }
],
"–ü—Ä–æ—Å—Ç–æ—Ä –¥–ª—è —Å–µ–º—å–∏ –∏ –∫–æ–º–ø–∞–Ω–∏–∏": [
{ name:"Xpander", price:55 }
],
"–≠–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è": [
{ name:"VinFast VF7", price:60 }
],
"–ë–∏–∑–Ω–µ—Å –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–ª–∞—Å—Å": [
{ name:"Mercedes C300", price:95 }
]
};

function show(id){
document.querySelectorAll('[id^="screen"]').forEach(el=>el.classList.add('hidden'));
document.getElementById(id).classList.remove('hidden');
}

function selectCity(city){
bookingData.city = city;
show("screen-segment");
}

function selectSegment(segment){
bookingData.segment = segment;

const list = document.getElementById("car-list");
list.innerHTML = "";

cars[segment].forEach(car=>{
list.innerHTML += `
<div class="card" onclick="selectCar('${car.name}', ${car.price})">
<strong>${car.name}</strong><br>
<span style="color:#2ecc71;">–æ—Ç $${car.price} / —Å—É—Ç–∫–∏</span>
</div>`;
});

show("screen-car");
}

function selectCar(name,price){
bookingData.car = name;
bookingData.price = price;
show("screen-dates");
}

function goToContacts(){
bookingData.dateFrom = document.getElementById("dateFrom").value;
bookingData.dateTo = document.getElementById("dateTo").value;
show("screen-contacts");
}

function sendBooking() {

  bookingData.name = document.getElementById("clientName").value;
  bookingData.contact = document.getElementById("clientContact").value;

  // üëá –í–ê–ñ–ù–û ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º type
  bookingData.type = "miniapp_booking";

  fetch(SCRIPT_URL, {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(bookingData)
  })
  .then(response => response.json())
  .then(data => {
    if (data.status === "ok") {
      show("screen-success");
    } else {
      alert("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.");
    }
  })
  .catch(err => {
    alert("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.");
  });
}
</script>

</body>
</html>
